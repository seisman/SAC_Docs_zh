\section{Python脚本中的SAC I/O}
ObsPy \footnote{\url{http://www.obspy.org}} 是用Python写的一个专用用于
地震学数据处理的模块，这一节介绍如何利用ObsPy模块读写SAC文件。

\subsection{安装obspy}
obspy可以通过Python自带的模块管理工具pip来安装，目前obspy的最新版本为
0.10.2：
\begin{minted}{console}
$ pip install obspy
\end{minted}

\subsection{读写SAC文件}
下面的例子读取了当前目录下的多个SAC文件，对每个文件进行滤波，将滤波前后
的波形放在一张图上进行对比，最后将滤波后的数据写到文件中。
\inputminted{python}{sacio/obspy-example.py}

% Obspy最新版本到1.0.1，穩定性比之前好很多
% 可直接讀取多種通用波形格式，包含直接讀miniseed檔案
% 讀取波形後要把資訊寫入SAC檔頭
% 可使用SACTrace.from_obspy_trace
% 再輸出成sac格式，sac檔頭處理部份詳細可看
% https://docs.obspy.org/packages/autogen/obspy.io.sac.sactrace.html
% 若要cut波形，讀取完波形，不管是stream或trace
% 都可使用trim(stream.trim or trace.trim)
% 個人認為特點是規格化時間讀取和輸出 (utcdatetime)
% https://docs.obspy.org/packages/autogen/obspy.core.utcdatetime.UTCDateTime.html
% 和規格化讀取地震目錄讀取和輸出(read_events）
% https://docs.obspy.org/master/packages/autogen/obspy.core.event.catalog.read_events.html

\subsection{其他}
ObsPy是一个相对完整的数据处理模块，SAC的读写只是其中的一小部分。个人
感觉，ObsPy在读写SAC文件时还存在如下几个问题：
\begin{itemize}
\item Trace类中没有包含文件名的信息，导致无法用简单的办法将波形写回原
    文件
\item 无法只读取波形数据中的一小段，即没有实现cut的功能
\end{itemize}

除了obspy之外，其他人也写了一些用于读写SAC文件的模块，列举如下，可供参考：
\begin{enumerate}
\item \url{https://github.com/eost/sacpy}
\item \url{https://github.com/emolch/pysacio}
\end{enumerate}
