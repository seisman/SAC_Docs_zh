数据截窗
========

**相关命令**\ ：\ :doc:`/commands/cut`

数据申请时一般会选择尽可能长的时间窗，而实际进行数据处理和分析时可能只
需要其中的一小段数据，这就需要对数据进行时间窗截取。
SAC 中的 ``cut`` 命令可以实现数据截取。

.. note::

    ``cut`` 命令是“参数设定类” 命令，即需要先执行 ``cut`` 命令再执行 ``read`` 命令。

.. _subsec:pdw:

pdw
---

使用 ``cut`` 命令对数据进行截取时需要定义数据时间窗。除了截取数据
之外，其他一些命令也会需要定义时间窗，比如
:doc:`/commands/rms`\ 、\ :doc:`/commands/mtw`\ 、\ :doc:`/commands/xlim`
等，这些命令都使用同样的方式定义时间窗，在 SAC 中称为 pdw，即 partial data window。

pdw 定义了一个开始时间和一个结束时间，其格式为
``ref offset ref offset``\ 。 其中 ``ref`` 为参考时刻，可以取
``Z``\ 、\ ``B``\ 、\ ``E``\ 、\ ``O``\ 、\ ``A``\ 、\ ``F``\ 、\ ``N``
和 ``Tn``\ （n=0–9）， 而 ``offset`` 为相对于参考时刻的时间偏移量。

参考时刻 ``ref`` 可以取如下值：

-  ``B``\ ：磁盘文件起始值
-  ``E``\ ：磁盘文件结束值
-  ``O``\ ：事件开始时间
-  ``A``\ ：初动到时
-  ``F``\ ：信号结束时间
-  ``Tn``\ ：用户自定义时间标记，n=0–9
-  ``Z``\ ：参考时刻
-  ``N``\ ：将 ``offset`` 解释为数据点数而非时间偏移量，其仅可以用于结束值

若开始或结束的 ``offset`` 省略则认为其值为0。若开始 ``ref``
省略则认为其为 ``Z``\ ；若结束 ``ref`` 省略则认为其值与开始 ``ref`` 相同。

下面的例子中展示了一些常见的 pdw 及其含义：

::

     B E            # 文件开始到文件结束，即与 cut off 相同
     B 0 30         # 文件开始的30秒
     A -10 30       # 初动前10秒到初动后30秒
     B N 2048       # 文件最初的2048个点
     T0 -10 N 1000  # 从T0前10秒起的1000个点
     30.2 48        # 相对磁盘文件0点的30.2到48秒

cut
---

:doc:`/commands/cut` 命令是“参数设定类”命令，因而需要先 ``cut`` 再 ``read``\ ：

.. code-block:: console

    SAC> cut t0 -5 5        # 截取 t0 前后各5秒，共计10秒的数据
    SAC> r *.SAC            # 先 cut 再 read
